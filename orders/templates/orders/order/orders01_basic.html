{% extends "base.html" %}

{% block title %}orders01_basic.html{% endblock %}

{% load staticfiles %}
{% load mathfilters %}    /* 빼기 곱하기 나누기 를 위해 설치*/
{% block extrastyle %}{% static "css/form03.css" %}{% endblock %}

{% load humanize %}   <!-- 세자리 콤마 찍기위해 로드함- settings.py에 앱추가함  -->

{% block content %}


<div id="content">
    <br>

    <div class="container-fluid">
        <div class="row">
             <div class="col-lg-10 col-md-12 col-xs-12 col-sm-12">

                <h5 style="color:#EF9365; text-align:right; padding:0px 40px 0px 0px;">Variable Insurance</h5>

            </div>   <!--그리드 -->


            <div class="col-lg-12 col-lg-offset-1 col-md-12 col-xs-12 col-sm-12">
                <div class="col-lg-2 col-md-3 col-xs-2 col-sm-3" style="padding:0px 10px 0px 0px;">
                    <br>
                    <table class="table table-bordered">
                          <thead>
                           <tr>
                             <th>
                                <div class="panel-group" id="accordion" >
                                    <div class="panel" style="border-color:white;">
                                      <div class="panel-heading" >
                                        <h4 class="panel-title">
                                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                             <p><b>Ⅰ. 변액수익률 확인</b></p>
                                          </a>
                                        </h4>
                                      </div>
                                      <div id="collapseOne" class="panel-collapse collapse in">
                                        <div class="panel-body">
                                            <h5 style="color:#565656; padding:0px 0px 3px 10px;">
                                                <span class="fas fa-caret-down"></span>&ensp; <b>보험명 입력</b>
                                                <a style="color:#529599; font-size:11px;" href="{% url 'shop:product_all' %}">&ensp; &ensp; >>다시 입력</a>
                                            </h5>
                                            <h5 style="color:#565656; padding:0px 0px 3px 10px;">
                                                <span class="fas fa-caret-down"></span>&ensp; <b>펀드 편입비율 입력</b>
                                            </h5>
                                            <h5 style="color:#565656; padding:0px 0px 3px 10px;">
                                                <span class="fas fa-caret-down"></span>&ensp;
                                                <b>보험 가입정보 입력</b>
                                            </h5>
                                            <h5 style="color:#565656; padding:0px 0px 3px 0px;">
                                                <span class="badge" style="background-color:#D46658; padding:6px 20px 6px 15px; font-size:12px;">
                                                    <span class="fas fa-caret-right"></span>&ensp;&nbsp;<b>투자현황 확인</b>
                                                </span>
                                            </h5>
                                        </div>  <!-- fanal-body -->
                                      </div>  <!-- collapseOne -->
                                    </div>  <!-- fanal -->
                                    <div class="panel">
                                      <div class="panel-heading">
                                        <h4 class="panel-title">
                                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                            <p><b>Ⅱ. 변액관리</b></p>
                                          </a>
                                        </h4>
                                      </div>
                                      <div id="collapseTwo" class="panel-collapse collapse in">
                                        <div class="panel-body">
                                            <h5>&emsp;
                                                <a href="{% url 'orders03:input' %}"><b onMouseOver="this.style.color='#DE781F';" onMouseOut="this.style.color=''"> ● 펀드변경</b></a>
                                            </h5>
                                            <h5>&emsp;
                                                <a href="{% url 'orders06:hungbu' %}"><b onMouseOver="this.style.color='#DE781F';" onMouseOut="this.style.color=''"> ● 흥부와 놀부</b></a>
                                            </h5>
                                            <h5>&emsp;
                                                <a href="{% url 'orders:fund' %}"><b onMouseOver="this.style.color='#DE781F';" onMouseOut="this.style.color=''"> ● 일반 적립식펀드</b></a>
                                            </h5>
                                            <span class="badge" style="background-color:white; color:white; padding:5px 20px 5px 15px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;이것은 안나타남</span>
                                        </div>
                                      </div>
                                    </div>    <!-- fanal -->
                                  </div>  <!-- fanal-group -->

                             </th>
                           </tr>
                       </thead>
                    </table>
                    <br><br><br><br><br><br><br><br><br><br><br>
                </div>   <!--그리드 -->

                <div class="col-lg-7 col-lg-offset-0 col-md-9 col-md-offset-0 col-sm-8 col-sm-offset-0" style="padding:0px 0px 0px 40px;">
                    <br>
                    <h4 style="padding:0px 0px 10px 0px; color:#343535;">
                        <b><span class="fas fa-arrow-alt-circle-right"></span>&ensp; 투자현황  확인</b>
                    </h4>
                    <ul class="nav nav-tabs" style="font-size:14px;">
                        <li class="active"><a style="color:#0C2031;" href="#"><b>가입 상세현황</b></a></li>
                        <li><a style="color:#0C2031;" href="{% url 'orders:earning' %}">보유 펀드현황</a></li>
                        <li><a style="color:#0C2031;" href="{% url 'orders:return' %}">예상 해지환급금</a></li>
                        <li><a style="color:#0C2031;" href="{% url 'orders:pention' %}">예상 연금액</a></li>
                        <li><a style="color:#0C2031;" href="{% url 'orders07:list' %}" %>펀드선택 (BM)</a></li>
                     </ul>
                     <br>
                </div>  <!--그리드 -->

                <div class="col-lg-7 col-md-9 col-sm-9" style="padding:0px 90px 20px 55px;">


                   {% for result in object_list33 %}
                    {% if result.warning02 %}
                    <h5 style="color:#DB8240; border: 1px solid #565856; padding:30px 0px 30px 30px; box-shadow: 2px 2px 0px 0px rgba(163, 174, 184, 0.7);">
                        <b><i class="fa fa-warning" style="font-size:20px; color:#E96437; padding:10px 0px 0px 0px;"> 입력오류 : </i> {{ result.warning02 }}</b>
                        <br><br>
                        <a style="color:#4C9BD2; font-size:14px;" href="{% url 'shop:product_all' %}">&ensp; &ensp; <b> >> 다시 입력</b></a>
                    </h5>
                    {% endif %}
                   {% endfor %}


                    <br>
                    <table class="table table-bordered table-responsive" style="font-size:1.4em;  box-shadow: 2px 2px 0px 0px rgba(163, 174, 184, 0.7);">
                        <th class = "text-center" width="18%" style="vertical-align:middle; border-color:#AEAEAF;">
                            <img src={% static "img/bt/pee20.jpg" %} alt="..." style="max-width: 85%; height: auto;">
                            <h5>
                                <b>가입현황 </b>
                           </h5>
                        </th>
                        <th class = "text-left" style="border-color:#AEAEAF; vertical-align:middle; color:#5E5F5F; padding:10px 0px 10px 10px;">
                            {% for result in object_list30 %}
                            <h5>
                                 - 보험명 : {{ result.insu_name }}
                            </h5>
                            <h5>
                                 - 가입일 : {{ result.entry_date|date:'Y-m-d' }},&nbsp;납기 : {{ result.paying_period }}년
                            </h5>
                            <h5>
                                 - 이체일 : {{ result.transfer_date }},&nbsp;보험료 : {{ result.premium|intcomma }}만원
                            </h5>
                             <h5>
                                 - 납입방법 : {{ result.entry_method }},&nbsp;현재연령 : {{ result.present_age }}세,&nbsp;연금개시연령 : {{ result.pention_age }}세
                            </h5>
                            {% endfor %}

                        </th>
                    </table>
                    <br>
                    <div style="background-color:#FBFCFE;">

                        <h4 style="text-align:center; padding:10px 0px 0px 0px;">
                            <b>상품가입 후 <span style="color:#E96437;">국내외 주가</span> 현황</b>
                            <i class='fas fa-feather' style='font-size:26px;color:red'></i>
                        </h4>

                        <h6 style="text-align:center; padding:0px 0px 0px 0px;">변액상품 가입이후 kospi, DOW, DAX(독일)의  </h6>
                        <h6 style="text-align:center; padding:0px 0px 0px 0px;">주가현황을 보실 수 있습니다.  </h6>
                        <hr style=" border: 0; height:1px; background:#333332;">
                    </div>
                    <BR>

                    <div class="thumbnail" style="padding : 10px 20px 10px 20px; border-color:#C0C1C2; border-radius: 1px; border-style:groove; box-shadow: 1px 1px 0px 0px rgba(163, 174, 184, 0.7);">
                        <div id="container2" style="padding: 0px 10px 0px 0px;">   <!-- 챠트 시작 -->

                           <script>
                                var chart02 = new Highcharts.chart('container2', {
                                    "chart": {

                                        "zoomType": "x",

                                        "polar": false,
                                        "height": 333,

                                        "marginBottom": 60,
                                        "marginTop": 20,
                                        "marginRight": 40,
                                        "marginLeft": 55,
                                        "paddingRight": 100
                                      },
                                      "title": {
                                        "text": ""
                                      },
                                      "subtitle": {
                                        "text": ""
                                      },
                                       "plotOptions": {
                                          "line": {                        <!-- 점의 크기 -->
                                             "marker": {
                                               "radius": 1
                                             }
                                          },
                                          "series": {
                                               "states": {
                                               "inactive": {
                                                  "opacity": 0.5
                                               }
                                             },
                                          "connectNulls":true
                                          }
                                      },
                                      "xAxis": {
                                        categories: [{% for result in object_list31 %}'{{ result.date|date:'y-m-d'}}'{% if not forloop.last %}, {% endif %}{% endfor %}],
                                        "index": 0,
                                        "isX": true,

                                        labels: {               <!--x축 글자-->
                                            style: {
                                               fontSize: '9'
                                            }
                                        },
                                      },
                                      "yAxis": {
                                        title: {
                                            text: "Graph (Kospi vs dow, dax(독일)) <br />Period : 2000-01-01 ~ present",    <!--그래프중간에 글자넣기-->
                                            align: "high",
                                            rotation: 0,
                                            x: 280,
                                            y: 30,
                                            useHTML: true,
                                            style: {
                                              align: "center",
                                              fontWeight: "bold"
                                            }
                                        },
                                        "index": 0,
                                        crosshair: true,
                                        labels: {
                                            format: '{value}'
                                        }

                                      },
                                      "series": [
                                        {
                                          data: [ {% for result in object_list31 %}{{ result.entry|floatformat:"2" }}{% if not forloop.last %}, {% endif %}{% endfor %}],
                                          "turboThreshold": 0,
                                          "type": "line",
                                          "colorByPoint": false,
                                          "color": "#462A1E",
                                          "name": "가입일"
                                        },
                                        {
                                          data: [ {% for result in object_list31 %}{{ result.kospi|floatformat:"2"}}{% if not forloop.last %}, {% endif %}{% endfor %}],
                                          "turboThreshold": 0,
                                          "type": "line",
                                          "color": "#7cb5ec",
                                          "name": "종합주가지수"
                                        },
                                        {
                                          data: [ {% for result in object_list31 %}{{ result.dow|floatformat:"2" }}{% if not forloop.last %}, {% endif %}{% endfor %}],
                                          "turboThreshold": 0,
                                          "type": "line",
                                          "colorByPoint": false,
                                          "color": "#ff7043",
                                          "name": "다우",
                                          "marker": {
                                                "symbol": "circle",
                                                "enabled": true,
                                           },
                                        },
                                        {
                                          data: [ {% for result in object_list31 %}{{ result.dax|floatformat:"2" }}{% if not forloop.last %}, {% endif %}{% endfor %}],
                                          "turboThreshold": 0,
                                          "type": "line",
                                          "colorByPoint": false,
                                          "color": "#80C5B4",
                                          "name": "독일",
                                          "marker": {
                                                "symbol": "square",
                                                "enabled": true,
                                           },
                                        }

                                      ],
                                      "data": {
                                        "googleSpreadsheetKey": false,
                                        "googleSpreadsheetWorksheet": false
                                      },
                                      "mapNavigation": {
                                        "enableDoubleClickZoom": true
                                      },
                                      "pane": {
                                        "background": []
                                      },
                                      "responsive": {
                                        "rules": []
                                      },
                                      "chartarea": {},
                                      "plotarea": {},
                                      "tooltip": {

                                      },
                                      "credits": {},
                                      "legend": {
                                        enabled: false

                                      }
                                    });

                            </script>
                        </div>
                    </div>       <!-- 챠트 끝  -->

                    <p>※ Dow 와 Dax는 Kospi 와 비례로 작성된 것임</p>


                    <br>


                    <h5><b>♣ 기간(가입시~현재) 주가 상승/하락 </b></h5>

                    <table class="table table-hover table-condensed table-responsive" style="font-size:1.1em;">
                        {% for result in object_list01 %}
                        <tbody class = "text-center" style="border-top:2px solid #9B959C;">
                            <tr>
                                <td>Kospi</td>
                                <td>{{ result.entry_kospi|floatformat:"2"|intcomma }}</td>
                                <td><i class='fas fa-arrow-right'></i></td>
                                <td>{{ result.present_kospi|floatformat:"2"|intcomma}}</td>
                                <td>{% if result.kospi_rate > 100 %}
                                    <b style="color:red;">▲{{ result.kospi_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.kospi_rate|mul:-1|floatformat:"1" }}</b>
                                </td> {% endif %}</td>
                            </tr>
                            <tr>
                                <td>Dow</td>
                                <td>{{ result.entry_dow|floatformat:"2"|intcomma }}</td>
                                <td><i class='fas fa-arrow-right'></i></td>
                                <td>{{ result.present_dow|floatformat:"2"|intcomma}}</td>
                                <td>{% if result.dow_rate > 100 %}
                                    <b style="color:red;">▲{{ result.dow_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.dow_rate|floatformat:"1" }}</b>
                                </td> {% endif %}</td>
                            </tr>
                            <tr style="border-bottom :1px solid #9B959C;">
                                <td>Dax(독일)</td>
                                <td>{{ result.entry_dax|floatformat:"2"|intcomma }}</td>
                                <td><i class='fas fa-arrow-right'></i></td>
                                <td>{{ result.present_dax|floatformat:"2"|intcomma}}</td>
                                <td>{% if result.dax_rate > 100 %}
                                    <b style="color:red;">▲{{ result.dax_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.dax_rate|mul:-1|floatformat:"1" }}</b>
                                    {% endif %}
                                </td>
                            </tr>
                        </tbody>

                        {% endfor %}
                    </table>
                    <br>
                    <h5><b>♣ 해당기간 수익률 (거치식, 적립식) </b></h5>

                    <table class="table table-bordered table-hover table-condensed table-responsive" style="font-size:1.0em;">
                        <thead style="border-top:2px solid #9B959C;">
                            <tr class="active text-center">
                                <th class = "text-center">구 분</th>
                                <th class = "text-center">투자금액</th>
                                <th class = "text-center">주 가</th>
                                <th class = "text-center">평가금액</th>
                                <th class = "text-center">환급률</th>
                            </tr>
                        </thead>

                        <tbody class = "text-center">
                            {% for result in object_list01 %}
                            <tr>
                                <td rowspan="3" style="vertical-align:middle;"><b>거치식</b></td>
                                <td rowspan="3" style="vertical-align:middle;">100,000,000</td>
                                <td>Kospi</td>
                                <td>{{ result.kospi_money|floatformat:"0"|intcomma }}</td>
                                <td>{% if result.kospi_rate > 100 %}
                                    <b style="color:red;">▲{{ result.kospi_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.kospi_rate|floatformat:"1" }}</b>
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td>Dow</td>
                                <td>{{ result.dow_money|floatformat:"0"|intcomma  }}</td>

                                <td>{% if result.dow_rate > 100 %}
                                    <b style="color:red;">▲{{ result.dow_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.dow_rate|mul:-1|floatformat:"1" }}</b>
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td>Dax</td>
                                <td>{{ result.dax_money|floatformat:"0"|intcomma  }}</td>

                                <td>{% if result.dax_rate > 100 %}
                                    <b style="color:red;">▲{{ result.dax_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.dax_rate|mul:-1|floatformat:"1" }}</b>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                        <tbody class = "text-center">
                            {% for result in object_list02 %}
                            <tr>
                                <td rowspan="3" style="vertical-align:middle;"><b>적립식</b></td>
                                <td rowspan="3" style="vertical-align:middle;">{% for result in object_list02 %}{{ result.total_premium|floatformat:"0"|intcomma }}{% endfor %}</td>
                                <td>Kospi</td>
                                <td>{{ result.kospi_money|floatformat:"0"|intcomma }}</td>
                                <td>{% if result.kospi_rate > 100 %}
                                    <b style="color:red;">▲{{ result.kospi_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.kospi_rate|mul:-1|floatformat:"1" }}</b>
                                    {% endif %}
                                </td>
                            </tr>
                            <tr>
                                <td>Dow</td>
                                <td>{{ result.dow_money|floatformat:"0"|intcomma }}</td>
                                 <td>{% if result.dow_rate > 100 %}
                                    <b style="color:red;">▲{{ result.dow_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.dow_rate|mul:-1|floatformat:"1" }}</b>
                                    {% endif %}
                                </td>

                            </tr>
                            <tr>
                                <td>Dax</td>
                                <td>{{ result.dax_money|floatformat:"0"|intcomma }}</td>
                                <td>{% if result.dax_rate > 100 %}
                                    <b style="color:red;">▲{{ result.dax_rate|floatformat:"1" }}</b>
                                    {% else %}
                                    <b style="color:blue;">▼{{ result.dax_rate|mul:-1|floatformat:"1" }}</b>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <h6>
                        <i class="fa fa-warning" style="font-size:14px; color:#E96437; padding:10px 0px 0px 0px;"></i>
                        <b style="color:#C83219;">주의 </b>

                        수익률 비교를 위한 것으로 사업비는 반영되어 있지 않습니다 (가정: 거치식 1억, 적립식 월 100만원 투자기준)
                    </h6>

                    <br><br>


                    <br><br>



                        <br><br>

                    <br>
                </div>
            </div>



        </div>  <!-- raw -->
    </div>  <!-- container -->
</div>




{% endblock %}