{% extends "base.html" %}

{% block title %}detail.html{% endblock %}

{% load staticfiles %}
{% block extrastyle %}{% static "css/form03.css" %}{% endblock %}

{% load humanize %}   <!-- 세자리 콤마 찍기위해 로드함- settings.py에 앱추가함  -->

{% block content %}

<style>

.aa {                        /* 좌측 마우스오버시 */
  transform: scale(1);
  -webkit-transform: scale(1);
  -moz-transform: scale(1);
  -ms-transform: scale(1);
  -o-transform: scale(1);
  transition: all 0.3s ease-in-out;   /* 부드러운 모션을 위해 추가*/
}
.aa:hover {
  transform: scale(1.01);
  -webkit-transform: scale(1.01);
  -moz-transform: scale(1.01);
  -ms-transform: scale(1.01);
  -o-transform: scale(1.01);
}

</style>

<div id="content">
    <br>

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-11 col-lg-offset-1 visible-lg">
                <h3><span class="glyphicon glyphicon-stats" style="color:#3699EF; font-size:30px;"></span>&nbsp;&nbsp;Variable Insurance</h3>
            </div>   <!--그리드 -->
            <div class="col-lg-12 visible-lg">
                <hr><br>
            </div>


            <div class="col-md-12 col-xs-12 col-sm-12 hidden-lg">

                <h5 style="color:#E87949; text-align:right; padding:0px 40px 0px 0px;">Variable Insurance</h5>

            </div>   <!--그리드 -->

            <div class="col-lg-12 col-lg-offset-1 col-md-12 col-xs-12 col-sm-12">
                <div class="col-lg-2 col-md-3 col-xs-2 col-sm-3" style="padding:0px 10px 0px 0px;">
                    <br>

                    <table class="aa table table-bordered">
                          <thead>
                           <tr>
                             <th>
                                <div class="panel-group" id="accordion" >
                                    <div class="panel" style="border-color:white;">
                                      <div class="panel-heading" >
                                        <h4 class="panel-title">
                                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                                            <p><b>Ⅰ. 변액수익률 확인</b></p>
                                          </a>
                                        </h4>
                                      </div>
                                      <div id="collapseOne" class="panel-collapse collapse in">
                                        <div class="panel-body">
                                            <h5 style="color:#565656; padding:0px 0px 3px 10px;">
                                                <span class="fas fa-caret-down"></span>&ensp; <b>보험명 입력</b>
                                            </h5>
                                            <h5 style="color:#565656; padding:0px 0px 3px 0px;">
                                                <span class="badge" style="background-color:#D46658; padding:6px 20px 6px 15px; font-size:12px;">
                                                    <span class="fas fa-caret-right"></span>&ensp;&nbsp;<b>펀드 편입비율 입력</b>
                                                </span>
                                            </h5>
                                            <h5 style="color:#565656; padding:0px 0px 3px 10px;">
                                                <span class="fas fa-caret-down"></span>&ensp; <b>보험 가입정보 입력</b>
                                            </h5>

                                            <h5 style="color:#565656; padding:0px 0px 3px 10px;">
                                                <span class="fas fa-caret-down"></span>&ensp;
                                                <b>투자현황 확인</b>
                                            </h5>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="panel">
                                      <div class="panel-heading">
                                        <h4 class="panel-title">
                                          <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                                            <p><b>Ⅱ. 변액관리</b></p>
                                          </a>
                                        </h4>
                                      </div>
                                      <div id="collapseTwo" class="panel-collapse collapse in">
                                        <div class="panel-body">
                                            <h5>&emsp;
                                                <a href="{% url 'orders03:input' %}"><b onMouseOver="this.style.color='#DE781F';" onMouseOut="this.style.color=''"> ● 펀드변경</b></a>
                                            </h5>
                                            <h5>&emsp;
                                                <a href="{% url 'orders06:hungbu' %}"><b onMouseOver="this.style.color='#DE781F';" onMouseOut="this.style.color=''"> ● 흥부와 놀부</b></a>
                                            </h5>
                                            <h5>&emsp;
                                                <a href="{% url 'orders:fund' %}"><b onMouseOver="this.style.color='#DE781F';" onMouseOut="this.style.color=''"> ● 일반 적립식펀드</b></a>
                                            </h5>
                                            <span class="badge" style="background-color:white; color:white; padding:5px 20px 5px 15px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;이것은 안나타남</span>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                             </th>
                           </tr>
                       </thead>
                    </table>
                    <br><br><br><br><br><br><br><br><br><br><br>
                </div>   <!--그리드 -->

            <!-- 아이패드 세로는 제외 -->
            <div class="col-lg-6 col-lg-offset-0 col-md-8 col-md-offset-0 hidden-sm" style="padding:0px 0px 0px 40px;">

                <br>
                <h4>총 보유펀드 수정 및 입력</h4>
                
                <br>
                <div class="table-responsive">   <!-- 테이블에 스크롤바가 생기게 감싸줌 -->
                    <table class="table table-hover">
                        <thead style="border-top:1px solid #9B959C;">
                            <tr class="active text-center">

                                <th class = "text-center" scope="col">펀 드 명</th>
                                <th scope="col">편입비율 (수정가능)</th>
                                <th class = "text-center" scope="col">선택삭제</th>
                                <th class = "text-center" scope="col">투자지역</th>
                                <th class = "text-center" scope="col">펀드유형</th>
                                <th class = "text-center" scope="col">주식비중</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for item in cart %}
                            {% with product=item.product %}
                           <tr>

                                <td style="vertical-align:middle;">{{ product.fund_name }}</td>
                                <td>
                                    <form action="{% url "cart:product_add" product.id %}" method="post">
                                        {{ item.quantity_form.quantity }}
                                        {{ item.quantity_form.is_update }}
                                        <input type="submit" class="btn btn-primary btn-xs" value="수정">
                                        {% csrf_token %}
                                    </form>
                                </td>
                                <td class="text-center" style="vertical-align:middle;"><a href="{% url "cart:product_remove" product.id %}">삭 제</a></td>


                                <td class="num text-center" style="vertical-align:middle;">{{ product.fund_type01 }}</td>
                                <td class="num text-center" style="vertical-align:middle;">{{ product.fund_type02 }}</td>
                                <td class="num text-center" style="vertical-align:middle;">{{ product.stock_percent|floatformat:"0" }}</td>
                            </tr>
                            {% endwith %}
                        {% endfor %}

                            <tr class="subtotal" style="border-bottom:1px solid #9B959C;">
                                <td>편입비율 합계</td>

                                <td colspan="2">{{ cart.get_product_total|floatformat:"0" }} % &nbsp;&nbsp;(합계 100%이 되어야 합니다)</td>
                                <td colspan="3"></td>
                            </tr>
                        </tbody>
                    </table>
                    {% if cart.get_product_total != 100 %}
                    <b style="color:red;">&emsp;<span class="fas fa-arrow-alt-circle-right"></span>&emsp;편입비율 합계가 100% 이 아닙니다. 확인 후 펀드추가(혹은 삭제, 조정)하여 주시기 바랍니다.</b>

                    {% endif %}
                </div>
                <br>
                 <p>
                    {% for item in cart %}
                        {% if forloop.first %}
                            <a href="/shop/{{item.product.category_id}}/" class="badge badge-secondary badge-lg">펀드추가선택</a>
                        {% endif %}
                    {% endfor %}
                </p>

                {% if cart.get_product_total == 100 %}
                    <p class="text-right">
                        가입내역 입력으로 이동 >>&nbsp;&nbsp; <a href='{% url "orders:order_create" %}' class="btn btn-primary btn-sm">다음</a>
                    </p>
                {% else %}
                    <p class="text-right">
                        가입내역 입력으로 이동 >>&nbsp;&nbsp; <a href='#' class="btn btn-primary btn-sm" disabled="disabled">다음</a>
                    </p>
                {% endif %}
            </div>   <!-- 그리드 -->

        </div>  <!-- raw -->
    </div>  <!-- container -->
</div>

{% endblock %}